{{- if .Site.Menus.main }}
<nav class="menu" role="navigation">

  <!-- Stock Mainroad mobile toggle -->
  <input class="menu__toggle" type="checkbox" id="menu__toggle" aria-label="Menu toggle">
  <label class="menu__btn" for="menu__toggle">
    <span class="menu__btn-title">{{ T "menu_label" | default "Menu" }}</span>
  </label>

  <ul class="menu__list">
    {{- $current := . }}

    {{- range .Site.Menus.main }}
      {{- if .Name }}

      <li class="menu__item
        {{ if .HasChildren }}menu__item--has-children{{ end }}
        {{ if or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) }}menu__item--active{{ end }}">

        <a class="menu__link" href="{{ .URL }}">
          <span class="menu__text">{{ .Name }}</span>
        </a>

        {{- if .HasChildren }}
        <ul class="menu__sub-list">
          {{- range .Children }}
          <li class="menu__sub-item {{ if $current.IsMenuCurrent "main" . }}menu__sub-item--active{{ end }}">
            <a class="menu__link" href="{{ .URL }}">
              <span class="menu__text">{{ .Name }}</span>
            </a>
          </li>
          {{- end }}
        </ul>
        {{- end }}

      </li>

      {{- end }}
    {{- end }}
  </ul>

</nav>
{{- end }}